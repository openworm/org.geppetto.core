GEPPETTO.ControlPanel.setColumnMeta([ { "columnName": "path", "order": 1, "locked": false, "visible": true, "displayName": "Path", "source": "$entity$.getPath()" }, { "columnName": "name", "order": 2, "locked": false, "visible": true, "displayName": "Name", "source": "$entity$.getName()" }, { "columnName": "type", "order": 3, "locked": false, "visible": true, "customComponent": GEPPETTO.ArrayComponent, "displayName": "Type(s)", "source": "$entity$.getTypes().map(function (t) {return t.getPath()})" }, { "columnName": "controls", "order": 4, "locked": false, "visible": true, "customComponent": GEPPETTO.ControlsComponent, "displayName": "Controls", "source": "" }, { "columnName": "image", "order": 5, "locked": false, "visible": true, "customComponent": GEPPETTO.ImageComponent, "displayName": "Image", "cssClassName": "img-column", "source": "GEPPETTO.ModelFactory.getAllVariablesOfMetaType($entity$.$entity$_meta.getType(), 'ImageType')[0].getInitialValues()[0].value.data" } ]);
GEPPETTO.ControlPanel.setColumns(['name', 'type', 'controls', 'image']);
GEPPETTO.ControlPanel.setDataFilter(function(entities){var visualInstances = GEPPETTO.ModelFactory.getAllInstancesWithCapability(GEPPETTO.Resources.VISUAL_CAPABILITY, entities);var compositeInstances = [];for(var i=0; i<visualInstances.length; i++){if(visualInstances[i].getType().getMetaType() == GEPPETTO.Resources.COMPOSITE_TYPE_NODE){compositeInstances.push(visualInstances[i]);}}return compositeInstances;});
GEPPETTO.ControlPanel.setControlsConfig({ "VisualCapability": { "visibility": { "condition": "GEPPETTO.SceneController.isVisible($instances$)", "false": { "id": "visibility", "actions": [ "GEPPETTO.SceneController.show($instances$); GEPPETTO.ControlPanel.refresh();" ], "icon": "fa-eye-slash", "label": "Hidden", "tooltip": "Show" }, "true": { "id": "visibility", "actions": [ "GEPPETTO.SceneController.hide($instances$); GEPPETTO.ControlPanel.refresh();" ], "icon": "fa-eye", "label": "Visible", "tooltip": "Hide" } }, "color": { "id": "color", "actions": [ "$instance$.setColor('$param$'); GEPPETTO.ControlPanel.refresh();" ], "icon": "fa-tint", "label": "Color", "tooltip": "Color" }, "zoom": { "id": "zoom", "actions": [ "GEPPETTO.SceneController.zoomTo($instances$)" ], "icon": "fa-search-plus", "label": "Zoom", "tooltip": "Zoom" }, "visibility_obj": { "showCondition": "$instance$.getType().hasVariable($instance$.getId() + '_obj')", "condition": "(function() { var visible = false; if ($instance$.getType().$instance$_obj != undefined && $instance$.getType().$instance$_obj.getType().getMetaType() != GEPPETTO.Resources.IMPORT_TYPE && $instance$.$instance$_obj != undefined) { visible = GEPPETTO.SceneController.isVisible([$instance$.$instance$_obj]); } return visible; })()", "false": { "id": "visibility_obj", "actions": [ "(function(){var instance = Instances.getInstance('$instance$.$instance$_obj'); if (instance.getType().getMetaType() == GEPPETTO.Resources.IMPORT_TYPE) { instance.getType().resolve(function() { GEPPETTO.FE.refresh() }); } else { GEPPETTO.SceneController.show([instance]); }})()" ], "icon": "fa-eye-slash", "label": "Hidden", "tooltip": "Show obj" }, "true": { "id": "visibility_obj", "actions": [ "GEPPETTO.SceneController.hide([$instance$.$instance$_obj])" ], "icon": "fa-eye", "label": "Visible", "tooltip": "Hide obj" } }, "visibility_swc": { "showCondition": "$instance$.getType().hasVariable($instance$.getId() + '_swc')", "condition": "(function() { var visible = false; if ($instance$.getType().$instance$_swc != undefined && $instance$.getType().$instance$_swc.getType().getMetaType() != GEPPETTO.Resources.IMPORT_TYPE && $instance$.$instance$_swc != undefined) { visible = GEPPETTO.SceneController.isVisible([$instance$.$instance$_swc]); } return visible; })()", "false": { "id": "visibility_swc", "actions": [ "(function(){var instance = Instances.getInstance('$instance$.$instance$_swc'); if (instance.getType().getMetaType() == GEPPETTO.Resources.IMPORT_TYPE) { instance.getType().resolve(function() { GEPPETTO.FE.refresh() }); } else { GEPPETTO.SceneController.show([instance]); }})()" ], "icon": "fa-eye-slash", "label": "Hidden", "tooltip": "Show swc" }, "true": { "id": "visibility_swc", "actions": [ "GEPPETTO.SceneController.hide([$instance$.$instance$_swc])" ], "icon": "fa-eye", "label": "Visible", "tooltip": "Hide swc" } }, }, "Common": { "info": { "id": "info", "actions": [ "G.addWidget(1).setData($instance$)" ], "icon": "fa-info-circle", "label": "Info", "tooltip": "Info" }, "delete": { "id": "delete", "actions": [ "$instance$.delete()" ], "icon": "fa-trash-o", "label": "Delete", "tooltip": "Delete" } } });
GEPPETTO.ControlPanel.setControls({"Common": ['info', 'delete'], "VisualCapability": ['color', 'visibility', 'zoom', 'visibility_obj', 'visibility_swc']});

Model.getDatasources()[0].fetchVariable('VFB_00000001')
Model.getDatasources()[0].fetchVariable('FBbt_00100219')

Instances.getInstance("VFB_00000001.VFB_00000001_meta")
Instances.getInstance("FBbt_00100219.FBbt_00100219_meta")

var resolve3D = function(path){ try{ var i = Instances.getInstance(path+"."+path+"_obj"); i = Instances.getInstance(path+"."+path+"_swc"); }catch(ignore){} i.getType().resolve(setSepCol(path)); }
var customHandler=function(node, path, widget){ var n;try {n = eval(path);} catch (ex) {node = undefined;}var meta=path+"."+path+"_meta";var target=widget; if(GEPPETTO.isKeyPressed("meta")){target=G.addWidget(1).addCustomNodeHandler(customHandler,'click');}if(n!=undefined){var metanode= Instances.getInstance(meta);target.setData(metanode).setName(n.getName());}else{Model.getDatasources()[0].fetchVariable(path,function(){Instances.getInstance(meta);target.setData(eval(meta)).setName(eval(path).getName()); resolve3D(path);});}};

G.addWidget(1).setPosition(687,80).setSize(551.8,681.8).setData(FBbt_00100219.FBbt_00100219_meta).setName(FBbt_00100219.getName()).addCustomNodeHandler(customHandler,'click');

window.Model.getLibraries()[1].getTypes()[0].resolve()
